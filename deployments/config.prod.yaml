# NMP Platform 生产环境配置文件
# 请根据实际环境修改相关配置

# HTTP服务器配置
server:
  host: "0.0.0.0"
  port: 8080
  mode: "release"  # 生产环境使用release模式
  read_timeout: "30s"
  write_timeout: "30s"

# PostgreSQL数据库配置
database:
  host: "${DB_HOST:-localhost}"
  port: ${DB_PORT:-5432}
  database: "${DB_NAME:-nmp}"
  username: "${DB_USER:-nmp}"
  password: "${DB_PASSWORD}"  # 请设置强密码
  ssl_mode: "require"  # 生产环境建议启用SSL

# Redis配置
redis:
  host: "${REDIS_HOST:-localhost}"
  port: ${REDIS_PORT:-6379}
  password: "${REDIS_PASSWORD}"  # 请设置密码
  db: 0

# InfluxDB配置
influxdb:
  url: "${INFLUXDB_URL:-http://localhost:8086}"
  token: "${INFLUXDB_TOKEN}"  # 请设置访问令牌
  org: "${INFLUXDB_ORG:-nmp}"
  bucket: "${INFLUXDB_BUCKET:-monitoring}"

# 认证配置
auth:
  jwt_secret: "${JWT_SECRET}"  # 请设置复杂的密钥，至少64字符
  token_expiry: "24h"
  refresh_expiry: "168h"  # 7天

# 日志配置
logging:
  level: "info"  # debug, info, warn, error
  format: "json"  # json, text
  output: "file"  # console, file, both
  file_path: "/var/log/nmp/nmp.log"
  max_size: 100  # MB
  max_backups: 10
  max_age: 30  # days
  compress: true

# 插件配置
plugins:
  directory: "/opt/nmp/plugins"
  configs:
    monitoring:
      enabled: true
      collection_interval: 60
      max_devices: 1000
      batch_size: 100
    alerting:
      enabled: true
      notification_channels: ["email", "webhook", "sms"]
      alert_retention: "30d"
    system:
      enabled: true
      backup_enabled: true
      backup_schedule: "0 2 * * *"  # 每天凌晨2点备份

# 性能配置
performance:
  max_connections: 1000
  connection_timeout: "30s"
  idle_timeout: "60s"
  read_buffer_size: 4096
  write_buffer_size: 4096

# 安全配置
security:
  cors_enabled: true
  cors_origins: ["https://yourdomain.com"]
  rate_limit_enabled: true
  rate_limit_requests: 100
  rate_limit_window: "1m"
  csrf_enabled: true
  
# 监控配置
monitoring:
  metrics_enabled: true
  metrics_path: "/metrics"
  health_check_path: "/health"
  pprof_enabled: false  # 生产环境建议关闭

# 备份配置
backup:
  enabled: true
  schedule: "0 2 * * *"  # 每天凌晨2点
  retention_days: 30
  storage_path: "/var/lib/nmp/backups"
  compress: true