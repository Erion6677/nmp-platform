# NMP Platform 配置文件示例
# ============================================================
# 复制此文件为 config.yaml 并根据您的环境修改配置
# 
# ⚠️ 安全提示：
# - 生产环境中，敏感配置（密码、Token、密钥）应通过环境变量设置
# - 支持的环境变量见下方各配置项说明
# ============================================================

# HTTP服务器配置
server:
  host: "0.0.0.0"
  port: 8080
  mode: "release"  # debug, release, test
  read_timeout: "30s"
  write_timeout: "30s"
  public_url: ""  # 设备回调使用的地址，留空则自动检测本机IP

# PostgreSQL数据库配置
# 环境变量覆盖：
#   NMP_DATABASE_HOST, NMP_DATABASE_PORT, NMP_DATABASE_NAME
#   NMP_DATABASE_USERNAME, NMP_DATABASE_PASSWORD, NMP_DATABASE_SSL_MODE
#   或简写：DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD, DB_SSL_MODE
database:
  host: "localhost"
  port: 5432
  database: "nmp"
  username: "nmp"
  password: ""  # ⚠️ 生产环境请使用环境变量 DB_PASSWORD
  ssl_mode: "disable"

# Redis配置
# 环境变量覆盖：
#   NMP_REDIS_HOST, NMP_REDIS_PORT, NMP_REDIS_PASSWORD, NMP_REDIS_DB
#   或简写：REDIS_HOST, REDIS_PORT, REDIS_PASSWORD, REDIS_DB
redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0

# InfluxDB配置
# 环境变量覆盖：
#   NMP_INFLUXDB_URL, NMP_INFLUXDB_TOKEN, NMP_INFLUXDB_ORG, NMP_INFLUXDB_BUCKET
#   或简写：INFLUXDB_URL, INFLUXDB_TOKEN, INFLUXDB_ORG, INFLUXDB_BUCKET
influxdb:
  url: "http://localhost:8086"
  token: ""  # ⚠️ 生产环境请使用环境变量 INFLUXDB_TOKEN
  org: "nmp"
  bucket: "monitoring"

# 认证配置
# 环境变量覆盖：
#   NMP_AUTH_JWT_SECRET, NMP_AUTH_TOKEN_EXPIRY, NMP_AUTH_REFRESH_EXPIRY
#   或简写：JWT_SECRET
auth:
  jwt_secret: ""  # ⚠️ 生产环境必须设置，至少32字符，请使用环境变量 JWT_SECRET
  token_expiry: "24h"
  refresh_expiry: "168h"  # 7天

# 插件配置
plugins:
  directory: "./plugins"
  configs:
    monitoring:
      enabled: true
      collection_interval: 60
    alerting:
      enabled: true
      notification_channels: ["email", "webhook"]
    system:
      enabled: true
